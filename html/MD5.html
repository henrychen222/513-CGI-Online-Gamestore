<html>
	<head>
		<meta content='noindex,nofollow' name='robots'>
		<link rel="stylesheet" type="text/css"
		href="http://wenchen.cs.und.edu/css/1.css" />
		<title>Interface I</title>
		<script type="js/ecmascript" src="md5.js"></script>
		<script type="text/javascript" src="md5.js"></script>
		<script type="text/javascript">  
			function MD5(pwd){
			
			document.getElementById("test001").innerHTML = "11111";
			  var password= hex_md5(document.getElementById("b").value);
				alert(password);//输出 看一下效果.
			//赋值回给 密码input 或 ajax请求.
			document.getElementById("test001").innerHTML = password;
			}
		</script>  
		<script>
			function test(){
				//window.location.href = "Login_zqw.html";
				var jsontext = '{"firstname":"Jesper","surname":"Aaberg","phone":["555-0100","555-0120"]}';
				document.write(jsontext);
				
				var contact = JSON.parse('{"firstname":"Jesper","surname":"Aaberg","phone":["555-0100","555-0120"]}');
				document.write("here");
				document.write(contact.surname + ", " + contact.firstname);
				document.write(contact.phone[1]);
			}
			function register(){
				document.getElementById("test001").innerHTML = "test_1";
				var url = "/~wchen/cgi-bin/Register_zqw.cgi";
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function(){
					document.getElementById("test001").innerHTML = this.readyState;
					document.getElementById("test002").innerHTML = this.status;
					if(this.readyState == 4 ){//&& this.status == 200
						document.getElementById("alert").innerHTML = "test_4";
						processResponse(this.responseText);
					}
				}
				document.getElementById("test001").innerHTML = "test_2";
				var param = "username="+document.getElementById("username").value;
				xmlhttp.open("POST",url,true);
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(param);
				//document.getElementById("test001").innerHTML = "test_3";
			}
			function processResponse(response){
				document.getElementById("alert").innerHTML = "test_8";
				document.getElementById("alert").innerHTML = response;
				var result = JSON.parse(response);
				document.getElementById("alert").innerHTML = "test_6";
				if(result.success){
					//window.location.href = "view_customer.html?id="+result.Id+"&cid="+result.Id;
					document.getElementById("alert").innerHTML = "Success";
					//window.location.href = "Login.html";
				}
				else {
					document.getElementById("alert").innerHTML = "Unable to register";
				}
			}
		</script>
	</head>
	<font size='0'><br /></font>
	
	<body text='#000000' vLink='#3366CC' link='#3366CC' bgColor='#ffffff' alink='#3366CC' background='http://wenchen.cs.und.edu/figure/bg4.png'>
		<div id="alert"></div>
		<div id="test001"></div>
		<div id="test002"></div>
		<table width='100%' height='80%'>
			<tr>
				<td align='center' valign='middle'>
					<table width="75%" cellspacing="0" cellpadding="15" border="0" class="shadow">
						<form method="get" action="http://people.aero.und.edu/~wchen/cgi-bin/Register.cgi">
							<tr bgcolor="#336699">
								<th id="header" align="left" colspan="3">
									<font face="Verdana, Arial, Helvetica" color="white" size="2"> &nbsp; Register</font>
								</th>
							</tr>
							<tr bgcolor="#CCEEFF">
								<td width="100%" valign="middle">
									<font face="Verdana, Arial, Helvetica" size="2">
										<font size="0"><br /></font>
										&nbsp; &nbsp; &nbsp; Name:
										<input id="a" type="text" name="username" size="32" > <br /><font size="0"><br /></font>
										&nbsp; &nbsp; &nbsp; Password:
										<input id="b" type="password" name="password" size="12" maxlength="12" >
										<!--
										&nbsp; &nbsp; &nbsp; Confirm Password:
										<input type="password" name="comPassword" size="12" maxlength="12" >
										-->										
										<?php echo $error; ?>
									</font>
									<p align="center">
										<input type="button" name="act" value="Submit" onclick="MD5()">
										&nbsp; &nbsp; &nbsp; &nbsp;
										<input type="button" name="act" value="home" onclick="test()">

										<br /><font size="0"><br /></font>
									</p>
								</td>
							</tr>
						</form>
					</table>
				</td>
			</tr>
		</table>
		
	</body>
</html>
